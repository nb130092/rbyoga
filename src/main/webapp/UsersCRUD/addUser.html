<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta  content="width=device-width, initial-scale=1.0">
    <title>增加用户</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body>
        <div style="width: 400px;border: beige 2px solid;margin: auto auto">
            <form role="form">
                <div class="form-group">
                    <label for="name">用户昵称</label>
                    <input type="text" class="form-control" name="u_pickname" id="u_pickname"
                           placeholder="请输入用户昵称">
                </div>
                <div class="form-group">
                    <label for="name">用户名</label>
                    <input type="text" class="form-control" name="u_username" id="u_username"
                           placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="name">用户密码</label>
                    <input type="text" class="form-control" name="u_password" id="u_password"
                           placeholder="请输入用户密码">
                </div>
                <div class="form-group">
                    <label for="name">用户安全码</label>
                    <input type="text" class="form-control" name="u_safecode" id="u_safecode"
                           placeholder="请输入用户安全码">
                </div>
                <div class="form-group">
                    <label for="name">用户手机号</label>
                    <input type="text" class="form-control" name="u_phone" id="u_phone"
                           placeholder="请输入用户手机号">
                </div>
                <div class="form-group">
                    <label for="name">用户个性签名</label>
                    <input type="text" class="form-control" name="u_selfword" id="u_selfword"
                           placeholder="请输入用户个性签名">
                </div>
                <div class="form-group">
                    <label for="name">用户余额</label>
                    <input type="text" class="form-control" name="u_money" id="u_money"
                           placeholder="请输入用户余额">
                </div>
                <div class="form-group">
                    <label for="name">用户角色</label>
                    <input type="text" class="form-control" name="u_role" id="u_role"
                           placeholder="请输入用户角色">
                </div>
                <div class="form-group">
                    <label for="name">用户卡种</label>
                    <input type="text" class="form-control" name="u_card" id="u_card"
                           placeholder="请输入用户卡种">
                </div>

                <div class="form-group">
                    <label for="inputfile">用户头像</label>
                    <input type="file" name="file"  id="FileUpload">
                </div>

                <button type="button" class="btn btn-default" id="addUser_btn">确认增加</button>
            </form>
        </div>




        <script>
            $(function () {
                $("#addUser_btn").click(function () {

                    var fileObj = document.getElementById("FileUpload").files[0];                // js 获取文件对象

                    if (typeof (fileObj) == "undefined" || fileObj.size <= 0) {
                        alert("请选择图片");
                        return;
                    }

                    var formData = new FormData(); //创建FormData对象

                    formData.append("file",fileObj); // 加入文件对象
                    formData.append("u_pickname",$("#u_pickname").val());
                    formData.append("u_username",$("#u_username").val());
                    formData.append("u_password",$("#u_password").val());
                    formData.append("u_safecode",$("#u_safecode").val());
                    formData.append("u_selfword",$("#u_selfword").val());
                    formData.append("u_phone",$("#u_phone").val());
                    formData.append("u_money",$("#u_money").val());
                    formData.append("u_role",$("#u_role").val());
                    formData.append("u_card",$("#u_card").val());


                    $.ajax({
                        type: "post",
                        url: "http://localhost:8888/users/saveUserWithImage", //上传文件的请求路径必须是绝对路劲
                        data: formData,
                        cache: false,
                        processData: false,
                        contentType: false,
                        success : function(result){
                            alert(result.message);
                            location.href="userMain.html";
                        }

                    });
                });
            });


        </script>
</body>
</html>