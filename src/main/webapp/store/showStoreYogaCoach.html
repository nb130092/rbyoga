
<!doctype html>
<html lang="en">
<head>
    <title>场馆签约教练</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="style.css">

</head>

<body>

<!-- 左侧导航！ -->
<div style="float: left; width: 20%;">
    <section class="app">
        <aside class="sidebar">
            <header>场馆导航栏</header>
            <nav class="sidebar-nav">
                <ul>

                    <li>
                        <a href="allStudents.html"><i class="ion-bag"></i> <span>查看所有学员</span></a>
                    </li>

                    <li>
                        <a href="allCoachs.html"><i class="ion-ios-settings"></i> <span class="">查看所有教练</span></a>
                    </li>

                    <li>
                        <a href="#"><i class="ion-ios-briefcase-outline"></i> <span class="">主页</span></a>
                    </li>

                    <li>
                        <a href="#"><i class="ion-ios-analytics-outline"></i> <span class="">场馆业务</span></a>
                        <ul class="nav-flyout">
                            <li>
                                <a href="#"><i class="ion-ios-timer-outline"></i>信息完善</a>
                            </li>
                            <li>
                                <a href="#"><i class="ion-arrow-graph-down-left"></i>我的关注</a>
                            </li>
                            <li>
                                <a href="#"><i class="ion-ios-partlysunny-outline"></i>场馆收入</a>
                            </li>
                            <li>
                                <a href="#"><i class="ion-ios-timer-outline"></i>场馆学员</a>
                            </li>
                            <li>
                                <a href="showStoreYogaCoach.html"><i class="ion-ios-timer-outline"></i>场馆签约教练</a>
                            </li>
                            <li>
                                <a href="#"><i class="ion-ios-timer-outline"></i>场馆通知</a>
                            </li>
                            <li>
                                <a href="showProduct.html"><i class="ion-ios-game-controller-a-outline"></i>场馆产品</a>
                            </li>
                        </ul>
                    </li>

                </ul>
            </nav>
        </aside>
    </section>
</div>
<!--右侧窗口-->
<div id="window">
    <div style="width: 800px;border: 1px seagreen solid" id="coachWindow">

    </div>
</div>

<!-- 分配学员的 -->
 <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                &times;
            </button>
            <h4 class="modal-title" id="myModalLabel2">
                分配学员
            </h4>
        </div>
        <div class="modal-body" id="repartition">


        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
</div>

<script>

    $(function () {

        showStoreYogaCoach();

    })





    // 展示教练
    function showStoreYogaCoach() {

        $.ajax({
            cache:  false,    //是否使用浏览器缓存
            type:  "get",   //请求方式
            url:  "http://localhost:8888/store/showStoreYogaCoach",   //请求路径
            dataType:  "json",  //响应的内容类型
            withCredentials: true ,
            async:  false,     //同步或者异步ajax
            success: function(result) {
                var coachStr = "";
                $.each(result.data.list,function(index,user){
                    coachStr+="<div class='media'  style='border: #6a6f8c 2px solid'>";
                    coachStr+="<div class='media-left media-middle' >";
                    coachStr+="<img src='http://localhost:8888/upload/"+user.u_head+"' class='media-object' style='width:130px' onclick='toSelfMain("+user.u_id+")'>";
                    coachStr+="</div>";
                    coachStr+="<div class='media-body' style='font-family: 微软雅黑;color: yellow'>";
                    coachStr+="<h4 class='media-heading'>教练姓名："+user.u_pickname+" &nbsp;";
                    coachStr+="<button class='btn btn-success btn-md' data-toggle='modal' data-target='#myModal'>通知</button>&nbsp;";
                    coachStr+="<button class='btn btn-primary btn-md' onclick='findAllStu("+user.u_id+")'>分配学员</button>&nbsp;";
                    coachStr+="<button class='btn btn-danger btn-md ' onclick='dismissStoreYogaCoach("+user.u_id+")'>解雇</button></h4>";
                    coachStr+="<h5 style='font-family: 微软雅黑;color: slateblue'>个性签名:</h5> <h5 style='font-family: 微软雅黑;color: blanchedalmond'>"+user.u_selfword+"</h5>";
                    coachStr+="<h5 style='font-family: 微软雅黑;color: slateblue'>联系方式: </h5> <h5 style='font-family: 微软雅黑;color: blanchedalmond'>"+user.u_phone+"</h5>";
                    coachStr+="</div></div>";
                    coachStr+="<div class='modal fade' id='myModal' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>";
                    coachStr+="<div class='modal-dialog'>";
                    coachStr+="<div class='modal-content'>";
                    coachStr+="<div class='modal-header'>";
                    coachStr+="<button type='button' class='close' data-dismiss='modal' aria-hidden='true'> &times;";
                    coachStr+="</button> <h4 class='modal-title id='myModalLabel'> 通知 </h4> </div> ";
                    coachStr+="<div class='modal-body'> <textarea id='textarea' cols='90' rows='5'>输入通知内容</textarea> </div>";
                    coachStr+="<div class='modal-footer'> <button type='button' class='btn btn-default' data-dismiss='modal>关闭 </button> <button type='button' class='btn btn-primary' onclick='replyStoreYogaCoach("+user.u_id+")'>发送通知 </button>";
                    coachStr+="</div> </div> </div> </div>”";

                });

                $("#coachWindow").html(coachStr);


            }

        })
    }

    //进主页
    function toSelfMain(u_id) {
        window.location="selfMain.html?user_id="+u_id;
    }


    //场馆解雇教练
    function dismissStoreYogaCoach(guest_id){
        $.ajax({
            cache: false,    //是否使用浏览器缓存
            type: "get",   //请求方式
            url: "http://localhost:8888/store/dismissStoreYogaCoach",   //请求路径
            data:{"guest_id":guest_id},
            dataType: "json",  //响应的内容类型
            async: false,     //同步或者异步ajax
            withCredentials: true ,
            success: function (result) {
                alert(result.message);
                showStoreYogaCoach();
            }
        })
    }

    //场馆向教练发通知
    function replyStoreYogaCoach(guest_id){
        $.ajax({
            cache:false,
            type:"post",
            url:"http://localhost:8888/store/replyStoreYogaCoach",
            data:{"guest_id":guest_id,"n_content":$('#textarea').val()},
            dataType:"json",
            async:false,
            withCredentials: true ,
            success: function (result) {
                alert(result.message);
                $('#myModal').modal('hide');
            }
        })
    }


    function findAllStu(u_id){
        //alert(u_id);
        window.location="repartitionStu.html?user_id="+u_id;

        // $.ajax({
        //     cache: false,    //是否使用浏览器缓存
        //     type: "get",   //请求方式
        //     url: "http://localhost:8888/users/findAllStudents", //请求路径
        //     //data:{"u_id":u_id},
        //     dataType:"json",  //响应的内容类型
        //     async: false,     //同步或者异步ajax
        //     withCredentials: true ,
        //     success: function(result) {
        //         var StuStr = "";
        //         $.each(result.data,function(index,user){
        //             // StuStr+="<div class='modal fade' id='myModal2' tabindex='-1' role='dialog' aria-labelledby='myModalLabel2' aria-hidden='true'>";
        //             // StuStr+="<div class='modal-dialog'>";
        //             // StuStr+="<div class='modal-content'>";
        //             // StuStr+="<div class='modal-header'>";
        //             // StuStr+="<button type='button' class='close' data-dismiss='modal' aria-hidden='true'> &times;";
        //             // StuStr+="</button><h4 class='modal-title id='myModalLabel2'> 通知 </h4> </div> ";
        //             // StuStr += "<div class='media'  style='border: #6a6f8c 2px solid'>";
        //             // StuStr += "<div class='media-left media-middle' >";
        //             // StuStr += "<img src='http://localhost:8888/upload/" + user.u_head + "' class='media-object' style='width:130px' onclick='toSelfMain(" + user.u_id + ")'>";
        //             // StuStr += "</div>";
        //             // StuStr += "<div class='media-body' style='font-family: 微软雅黑;color: yellow'>";
        //             // var xxx =  "<h4 class='media-heading'>学员姓名：" + user.u_pickname + " &nbsp;<button type='button'class='btn btn-primary btn-md ' onclick='toFollow(" + user.u_id + ")'>关注</button></h4>";
        //             // // 如果关注了该学员，取消关注按钮
        //             // $.each(result.data.followIdList,function(index,followID) {
        //             //     if (followID == user.u_id){
        //             //         xxx = "<h4 class='media-heading'>学员姓名：" + user.u_pickname + " &nbsp;已关注</h4>";
        //             //         return;
        //             //     }
        //             // });
        //             // StuStr+=xxx;
        //             // StuStr += "<h5 style='font-family: 微软雅黑;color: slateblue'>个性签名:</h5> <h5 style='font-family: 微软雅黑;color: blanchedalmond'>" + user.u_selfword + "</h5>";
        //             // StuStr += "<h5 style='font-family: 微软雅黑;color: slateblue'>联系方式: </h5> <h5 style='font-family: 微软雅黑;color: blanchedalmond'>" + user.u_phone + "</h5>";
        //             // StuStr += "</div></div>";
        //
        //             // StuStr+="<div class='modal-footer'> <button type='button' class='btn btn-default' data-dismiss='modal>关闭 </button> <button type='button' class='btn btn-primary' >发送通知 </button>";
        //             // StuStr+="</div> </div> </div> </div> </div>”";
        //         });
        //         $("#StuStr").html(StuStr);
        //         $('#myModal2').modal();
        //
        //     }
        //
        // })
    }

</script>
</body>
</html>
